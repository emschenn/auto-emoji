import React, { useState, useEffect } from "react";
import ReactCardFlip from "react-card-flip";

import "../style/card.scss";

import { emojiData } from "./emojiData";

interface Emoji {
  emoji: string;
  text: string;
}

interface Props {
  shape: string;
  color: string;
}

const EmojiCard = ({ shape, color }: Props) => {
  const [isFlipped, setIsFlipped] = useState<boolean>(false);
  const [emoji, setEmoji] = useState<Emoji | null>(null);

  useEffect(() => {
    const randomTime = Math.floor(Math.random() * 6) + 5;
    const interval = setInterval(() => {
      setIsFlipped(!isFlipped);
      const id = Math.floor(Math.random() * emojiData.length);
      setEmoji(emojiData[id]);
    }, randomTime * 1000);

    return () => {
      clearInterval(interval);
    };
  }, [isFlipped]);

  const onClick = () => {
    setIsFlipped(!isFlipped);
  };

  if (shape === "circle")
    return (
      <ReactCardFlip
        isFlipped={isFlipped}
        infinite={true}
        flipDirection="horizontal"
      >
        <div
          className={`front ${shape} card`}
          onClick={onClick}
          style={{ background: color }}
        >
          <span className="card-text">{emoji?.text}</span>
        </div>
        <div className="back" onClick={onClick}>
          {emoji?.emoji}
        </div>
      </ReactCardFlip>
    );

  return (
    <ReactCardFlip
      isFlipped={isFlipped}
      infinite={true}
      flipDirection="horizontal"
    >
      <div className={`front ${shape}`} onClick={onClick}>
        <svg
          width="168"
          height="167"
          viewBox="0 0 168 167"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            style={{ fill: color }}
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M168 83.4999L167.998 91.8499L167.992 95.3082L167.981 97.9615L167.966 100.198L167.947 102.167L167.924 103.947L167.897 105.583L167.866 107.105L167.83 108.533L167.79 109.883L167.746 111.166L167.697 112.391L167.645 113.564L167.588 114.692L167.527 115.779L167.462 116.829L167.392 117.845L167.319 118.83L167.241 119.787L167.159 120.718L167.072 121.624L166.982 122.507L166.887 123.369L166.787 124.21L166.684 125.033L166.576 125.837L166.464 126.624L166.348 127.396L166.228 128.151L166.103 128.892L165.974 129.619L165.84 130.332L165.702 131.032L165.56 131.72L165.414 132.395L165.263 133.059L165.108 133.712L164.948 134.354L164.785 134.986L164.616 135.607L164.444 136.218L164.267 136.82L164.085 137.412L163.899 137.995L163.709 138.57L163.514 139.136L163.315 139.693L163.112 140.242L162.903 140.783L162.691 141.316L162.473 141.841L162.252 142.359L162.025 142.869L161.795 143.372L161.559 143.868L161.319 144.357L161.074 144.839L160.825 145.314L160.571 145.782L160.312 146.244L160.049 146.699L159.781 147.148L159.508 147.591L159.23 148.027L158.948 148.458L158.66 148.882L158.368 149.3L158.071 149.713L157.769 150.119L157.462 150.52L157.151 150.915L156.834 151.304L156.512 151.688L156.185 152.066L155.853 152.439L155.515 152.806L155.173 153.168L154.825 153.525L154.472 153.876L154.114 154.222L153.75 154.563L153.381 154.898L153.007 155.229L152.627 155.554L152.241 155.875L151.85 156.19L151.453 156.501L151.05 156.806L150.642 157.107L150.227 157.402L149.807 157.693L149.381 157.979L148.949 158.26L148.51 158.537L148.065 158.808L147.614 159.075L147.157 159.337L146.693 159.595L146.222 159.848L145.744 160.096L145.26 160.34L144.769 160.579L144.271 160.813L143.765 161.043L143.253 161.268L142.732 161.489L142.204 161.705L141.669 161.917L141.125 162.124L140.574 162.327L140.014 162.526L139.445 162.719L138.868 162.909L138.282 163.094L137.687 163.275L137.082 163.451L136.468 163.623L135.844 163.791L135.21 163.954L134.565 164.113L133.909 164.267L133.242 164.417L132.563 164.563L131.872 164.705L131.169 164.842L130.453 164.975L129.723 165.104L128.978 165.228L128.219 165.349L127.445 165.464L126.654 165.576L125.846 165.683L125.021 165.787L124.176 165.886L123.31 165.98L122.424 166.071L121.514 166.157L120.58 166.239L119.62 166.317L118.631 166.39L117.611 166.46L116.557 166.525L115.467 166.586L114.336 166.643L113.159 166.695L111.932 166.744L110.646 166.788L109.294 166.828L107.864 166.864L106.341 166.895L104.705 166.923L102.928 166.946L100.964 166.965L98.7399 166.98L96.1131 166.991L92.7279 166.998L86.3704 167L75.9414 166.998L72.3598 166.992L69.6462 166.982L67.3702 166.968L65.3709 166.949L63.5672 166.927L61.9112 166.9L60.3721 166.869L58.9283 166.834L57.5645 166.794L56.2689 166.751L55.0326 166.703L53.8482 166.651L52.7102 166.595L51.6136 166.535L50.5545 166.47L49.5295 166.402L48.5358 166.329L47.571 166.252L46.6328 166.17L45.7195 166.085L44.8293 165.995L43.9608 165.901L43.1127 165.803L42.2838 165.7L41.4731 165.593L40.6797 165.483L39.9027 165.367L39.1414 165.248L38.3949 165.124L37.6627 164.996L36.9442 164.864L36.2388 164.727L35.546 164.586L34.8654 164.441L34.1965 164.291L33.5389 164.138L32.8923 163.979L32.2562 163.817L31.6305 163.65L31.0147 163.479L30.4087 163.303L29.812 163.123L29.2246 162.939L28.646 162.75L28.0762 162.557L27.515 162.359L26.962 162.157L26.4172 161.95L25.8803 161.739L25.3512 161.524L24.8298 161.304L24.3158 161.079L23.8092 160.85L23.3098 160.616L22.8175 160.378L22.3322 160.135L21.8537 159.888L21.382 159.635L20.9168 159.379L20.4583 159.117L20.0061 158.851L19.5603 158.58L19.1208 158.305L18.6875 158.024L18.2602 157.739L17.839 157.449L17.4237 157.154L17.0143 156.854L16.6108 156.55L16.213 156.24L15.8208 155.925L15.4343 155.606L15.0534 155.281L14.678 154.951L14.3081 154.617L13.9436 154.277L13.5844 153.931L13.2306 153.581L12.8821 153.225L12.5388 152.864L12.2007 152.498L11.8678 152.126L11.54 151.748L11.2172 151.366L10.8995 150.977L10.5869 150.583L10.2792 150.183L9.97644 149.778L9.67862 149.366L9.38569 148.949L9.09762 148.526L8.81438 148.096L8.53596 147.661L8.26231 147.219L7.99343 146.771L7.72928 146.317L7.46984 145.856L7.21509 145.389L6.96501 144.915L6.71958 144.434L6.47878 143.946L6.24259 143.452L6.01099 142.95L5.78396 142.441L5.56149 141.924L5.34356 141.4L5.13016 140.868L4.92126 140.329L4.71686 139.781L4.51693 139.225L4.32148 138.661L4.13047 138.088L3.94391 137.506L3.76177 136.915L3.58405 136.315L3.41073 135.705L3.24181 135.085L3.07726 134.455L2.91709 133.815L2.76128 133.164L2.60983 132.502L2.46271 131.828L2.31993 131.143L2.18148 130.444L2.04735 129.733L1.91752 129.009L1.792 128.27L1.67077 127.517L1.55384 126.748L1.44118 125.964L1.3328 125.162L1.22869 124.342L1.12885 123.504L1.03326 122.646L0.941927 121.766L0.854842 120.864L0.772002 119.937L0.693402 118.985L0.619037 118.004L0.548904 116.993L0.482999 115.948L0.421319 114.868L0.36386 113.746L0.310619 112.581L0.261594 111.365L0.216783 110.092L0.176182 108.753L0.13979 107.338L0.107605 105.832L0.0796261 104.216L0.0558508 102.462L0.0362783 100.527L0.0209076 98.3403L0.00973802 95.7693L0.00276893 92.4902L0 86.8323L0.00143109 75.8437L0.00706227 72.1715L0.0168938 69.4274L0.0309263 67.1378L0.0491603 65.1321L0.0715967 63.3257L0.0982368 61.6692L0.129082 60.1308L0.164133 58.6887L0.203393 57.3272L0.246863 56.0342L0.294546 54.8008L0.346443 53.6197L0.402558 52.4849L0.462894 51.3917L0.527453 50.336L0.596239 49.3146L0.669255 48.3245L0.746506 47.3632L0.827995 46.4285L0.913727 45.5187L1.00371 44.632L1.09794 43.767L1.19642 42.9224L1.29918 42.097L1.40619 41.2898L1.51749 40.4998L1.63306 39.7261L1.75292 38.968L1.87707 38.2249L2.00552 37.4959L2.13829 36.7806L2.27536 36.0784L2.41676 35.3887L2.56249 34.7112L2.71257 34.0454L2.86699 33.3909L3.02577 32.7472L3.18892 32.1142L3.35645 31.4913L3.52836 30.8785L3.70468 30.2752L3.88541 29.6814L4.07057 29.0967L4.26015 28.5209L4.45419 27.9539L4.65269 27.3952L4.85566 26.8449L5.06313 26.3027L5.2751 25.7684L5.49158 25.2419L5.7126 24.7229L5.93818 24.2115L6.16832 23.7073L6.40305 23.2103L6.64238 22.7204L6.88633 22.2374L7.13493 21.7612L7.38819 21.2917L7.64613 20.8289L7.90877 20.3725L8.17615 19.9225L8.44827 19.4789L8.72517 19.0415L9.00688 18.6103L9.2934 18.1851L9.58478 17.7659L9.88104 17.3526L10.1822 16.9452L10.4883 16.5436L10.7994 16.1477L11.1155 15.7574L11.4366 15.3728L11.7628 14.9937L12.0941 14.6201L12.4306 14.2519L12.7722 13.8892L13.119 13.5318L13.4712 13.1796L13.8286 12.8328L14.1914 12.4911L14.5596 12.1546L14.9332 11.8232L15.3124 11.497L15.6971 11.1758L16.0874 10.8596L16.4834 10.5484L16.8852 10.2421L17.2927 9.94078L17.7061 9.64434L18.1254 9.35277L18.5507 9.06603L18.9821 8.7841L19.4197 8.50695L19.8634 8.23456L20.3136 7.9669L20.7701 7.70395L21.2331 7.44568L21.7027 7.19208L22.179 6.94312L22.6622 6.69878L23.1523 6.45905L23.6494 6.2239L24.1537 5.99331L24.6653 5.76727L25.1843 5.54577L25.7109 5.32878L26.2453 5.11628L26.7876 4.90828L27.3379 4.70473L27.8965 4.50565L28.4636 4.311L29.0393 4.12078L29.6239 3.93497L30.2176 3.75357L30.8206 3.57656L31.4333 3.40392L32.0558 3.23566L32.6885 3.07175L33.3318 2.91218L33.9858 2.75696L34.6511 2.60606L35.3279 2.45947L36.0168 2.3172L36.7181 2.17923L37.4324 2.04555L38.1601 1.91616L38.902 1.79105L39.6586 1.6702L40.4305 1.55362L41.2186 1.4413L42.0237 1.33323L42.8466 1.2294L43.6885 1.12981L44.5503 1.03445L45.4335 0.943329L46.3393 0.856427L47.2694 0.773744L48.2255 0.695276L49.2097 0.621019L50.2244 0.550969L51.2723 0.485121L52.3566 0.423474L53.4809 0.366023L54.65 0.312765L55.8691 0.263698L57.1449 0.21882L58.4859 0.178128L59.9027 0.141619L61.4095 0.109293L63.0254 0.0811477L64.7779 0.0571811L66.7081 0.0373924L68.8839 0.0217807L71.4316 0.010345L74.6504 0.00308492L79.8943 0L91.3282 0.0010901L95.147 0.00635529L97.957 0.0157958L100.289 0.0294122L102.325 0.047205L104.156 0.0691753L105.833 0.095324L107.39 0.125653L108.847 0.160162L110.223 0.198855L111.529 0.241733L112.774 0.288799L113.966 0.340053L115.111 0.395501L116.214 0.455143L117.279 0.518983L118.309 0.587025L119.308 0.659272L120.277 0.735727L121.219 0.816396L122.137 0.901281L123.03 0.990388L123.902 1.08372L124.754 1.18129L125.585 1.28309L126.399 1.38913L127.195 1.49942L127.975 1.61397L128.738 1.73278L129.487 1.85585L130.222 1.9832L130.942 2.11483L131.65 2.25075L132.344 2.39096L133.027 2.53548L133.698 2.68432L134.357 2.83748L135.005 2.99497L135.643 3.1568L136.27 3.32298L136.888 3.49353L137.495 3.66845L138.094 3.84775L138.682 4.03145L139.262 4.21956L139.834 4.41209L140.396 4.60906L140.95 4.81047L141.497 5.01634L142.035 5.22669L142.565 5.44153L143.088 5.66088L143.603 5.88475L144.111 6.11316L144.611 6.34612L145.104 6.58366L145.591 6.8258L146.07 7.07255L146.543 7.32393L147.009 7.57996L147.469 7.84067L147.922 8.10608L148.369 8.37621L148.81 8.65108L149.244 8.93073L149.672 9.21517L150.094 9.50443L150.51 9.79854L150.921 10.0975L151.325 10.4014L151.724 10.7103L152.117 11.0241L152.504 11.3429L152.886 11.6667L153.263 11.9956L153.633 12.3297L153.999 12.6689L154.359 13.0132L154.713 13.3629L155.063 13.7177L155.407 14.078L155.746 14.4435L156.079 14.8145L156.408 15.191L156.732 15.573L157.05 15.9605L157.364 16.3537L157.672 16.7526L157.976 17.1572L158.274 17.5677L158.568 17.984L158.857 18.4063L159.141 18.8347L159.42 19.2691L159.694 19.7098L159.964 20.1567L160.229 20.61L160.489 21.0698L160.745 21.5361L160.995 22.009L161.242 22.4887L161.483 22.9753L161.72 23.4689L161.952 23.9697L162.18 24.4776L162.403 24.993L162.622 25.5159L162.836 26.0464L163.046 26.5849L163.251 27.1313L163.451 27.6859L163.648 28.2489L163.839 28.8205L164.027 29.4009L164.209 29.9904L164.388 30.5891L164.562 31.1973L164.732 31.8153L164.897 32.4435L165.058 33.082L165.214 33.7313L165.366 34.3917L165.514 35.0635L165.658 35.7473L165.797 36.4435L165.932 37.1525L166.062 37.8748L166.188 38.6111L166.31 39.362L166.428 40.1281L166.541 40.9102L166.65 41.7091L166.755 42.5257L166.855 43.361L166.952 44.2161L167.044 45.0923L167.132 45.9908L167.215 46.9134L167.294 47.8617L167.369 48.8378L167.44 49.8439L167.507 50.8828L167.569 51.9576L167.627 53.072L167.681 54.2303L167.731 55.438L167.776 56.7015L167.818 58.0289L167.855 59.4309L167.887 60.9209L167.916 62.5178L167.941 64.2477L167.961 66.1504L167.977 68.2903L167.989 70.7862L167.996 73.912L168 78.7873L168 83.4999Z"
          />
        </svg>
        <span className="card-text">{emoji?.text}</span>
      </div>
      <div className="back" onClick={onClick}>
        {emoji?.emoji}
      </div>
    </ReactCardFlip>
  );
};

export default EmojiCard;
